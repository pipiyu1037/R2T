import numpy as np
import matplotlib.pyplot as plt
import matplotlib.colors as mcolors

projQ_res = [(-3323502.1330548488, 41773.0), (-1584992.528923894, 41773.0), (-885307.9616922052, 41773.0), (-223904.77487637696, 41773.0), (-119676.68826365648, 41773.0), (-66285.89484806039, 41773.0), (1854.3901520151921, 41773.0), (23541.213401641446, 41773.0), (29340.713704304475, 41773.0), (36545.916829513226, 41773.0), (38300.71334810175, 41773.0), (39671.953361661304, 41773.0), (41167.422010965995, 41773.0), (41440.740387948135, 41773.0), (41570.96937152088, 41773.0), (41703.627466372345, 41773.0)]
projQ = 41703.627466372345
projQ_true = 41773

single_pri_res = [(186979.77221841892, 330157.80390880205), (255621.6924513402, 327985.3609251021), (251294.76465122233, 282870.53181950137), (175742.58567694435, 192491.30984059992), (98767.8468351321, 108139.03162479994), (51690.48705778138, 56420.7711103), (26261.76783444657, 28569.8144108), (13317.328987900772, 14361.844313800002), (6604.600504708105, 7195.2231415999995), (3290.6631876312367, 3602.3090168), (1678.6290100195597, 1802.0), (820.9314143233523, 901.0)]
single = 255621.6924513402
single_true = 330157.8039088

multi_pri_res = [(273706.9789555659, 330157.80390880205), (296005.082951876, 330157.80390880205), (316572.42190819577, 330157.80390880205), (324489.6710669171, 329712.4688933021), (311174.6088696272, 313708.5722231018), (224933.36652608172, 226002.30397879952), (129755.75421296578, 130658.21281360036), (69053.66289911068, 69762.5209777001), (35722.18633381418, 35977.87554140003), (18107.32525229978, 18236.81052979999), (9101.797700528776, 9172.062147000002)]
multi = 3229220.945054871
multi_true = 330157.8039088

tri_res = [(-56044.65196483159, 31791.0), (-32656.066268923314, 31791.0), (-1694.1681385825214, 31791.0), (16515.643626145687, 31791.0), (26057.449867782118, 31752.0), (27927.206646180093, 31664.0), (29254.47016779143, 31235.0), (29184.419015600743, 29725.0), (25983.04402859447, 26416.0), (20923.745338135403, 21141.0), (15021.629237300673, 15162.0), (9807.607743609986, 9856.0)]
tri = 29254
tri_true = 31791

fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(15, 12))
fig.suptitle('Query Results', fontsize=16)
# 函数用于处理每个子图的数据
def plot_data(ax, data, true_value, title):
    n = len(data)
    taus = [2**i for i in range(n)]
    x_positions = range(len(taus))
    
    y1 = [data[i][0] for i in np.arange(n-1,-1,-1)]
    y2 = [data[i][1] for i in np.arange(n-1,-1,-1)]
    
    ax.plot(x_positions, y1, 'b-', label='Q^(I, τ)', linewidth=0.5)
    ax.plot(x_positions, y2, 'r-', label='Q(I, τ)', linewidth=0.5)
    ax.axhline(y=true_value, color='k', linestyle='--', label='True Query')
    
    ax.set_xticks(x_positions)
    ax.set_xticklabels(taus)
    ax.set_xlabel('τ')
    ax.set_ylabel('Value')
    ax.set_title(title)
    ax.grid(True, linestyle='--', alpha=0.7)
    ax.legend()
    
plot_data(ax1, projQ_res, projQ_true, 'Projection Query')
plot_data(ax2, single_pri_res, single_true, 'Single Privite Query')
plot_data(ax3, multi_pri_res, multi_true, 'Multi Privite Query')
plot_data(ax4, tri_res, tri_true, 'Triangle Count Query')

plt.tight_layout()
plt.show()